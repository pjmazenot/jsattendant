"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),StepsJs=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),this.currentScroll=StepsJsTools.getScrollTop(),this.steps=e,this.options=_extends({duration:300,styles:{frame:{customClass:"",borderWidth:3,borderColor:"#ff0000"},hint:{customClass:"",borderWidth:1,borderColor:"#00ff00",borderRadius:5,backgroundColor:"#dbffdb"}}},i),this.options.interval=5,this.frame=document.getElementById("jsa-frame"),this.hint=document.getElementById("jsa-hint");var s=this;window.onresize=function(t){s.isResizing=!0,setTimeout(function(){s.isResizing=!1},100),setTimeout(function(){s.isResizing||(s.moveFrame(),s.displayHint())},150)},window.onscroll=function(){s.currentScroll=StepsJsTools.getScrollTop()},this.run()}return _createClass(t,[{key:"run",value:function(){this.currentStepIndex=0,this.processStep("next")}},{key:"processStep",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";if("prev"===t);else{if(this.currentStepIndex++,this.currentStepIndex>this.steps.length)return this.frame.style.opacity="0",void(this.hint.style.opacity="0");this.currentStep=this.steps[this.currentStepIndex-1]}this.targetElem=document.getElementById(this.currentStep.elementId),this.moveFrame(),this.displayHint(),this.addStepTriggers(t)}},{key:"moveFrame",value:function(){this.frame||(this.frame=document.createElement("div"),this.frame.setAttribute("id","jsa-frame"),""!=this.options.styles.frame.customClass&&this.frame.setAttribute("class",this.options.styles.frame.customClass),this.frame.setAttribute("style","pointer-events:none;"),this.frame.style.position="absolute",this.frame.style.boxSizing="border-box",this.frame.style.border=this.options.styles.frame.borderWidth+"px solid "+this.options.styles.frame.borderColor,this.frame.style.opacity="0",document.body.appendChild(this.frame));var t=this.targetElem.getBoundingClientRect(),e=this.frame.getBoundingClientRect(),i=e.top+this.currentScroll,s=e.left,r=this.frame.offsetWidth,n=this.frame.offsetHeight,o=t.top+this.currentScroll-i,l=t.left-s,a=this.targetElem.offsetWidth-r,h=this.targetElem.offsetHeight-n,c=o/(this.options.duration/this.options.interval),u=l/(this.options.duration/this.options.interval),d=a/(this.options.duration/this.options.interval),p=h/(this.options.duration/this.options.interval);clearInterval(this.moveInterval),this.moveInterval=setInterval(function(t,e){return function(){++e>t.options.duration/t.options.interval?(clearInterval(t.moveInterval),1===t.currentStepIndex&&(t.frame.style.opacity="1")):(i+=c,s+=u,r+=d,n+=p,t.frame.style.top=i+"px",t.frame.style.left=s+"px",t.frame.style.width=r+"px",t.frame.style.height=n+"px")}}(this,0),this.options.interval)}},{key:"displayHint",value:function(){if(!this.hint){var t=document.createElement("div");t.setAttribute("id","jsa-hint-title"),t.style.fontWeight="bold";var e=document.createElement("div");e.setAttribute("id","jsa-hint-description"),this.hint=document.createElement("div"),this.hint.setAttribute("id","jsa-hint"),""!=this.options.styles.hint.customClass&&this.hint.setAttribute("class",this.options.styles.hint.customClass),this.hint.style.position="absolute",this.hint.style.padding="10px",this.hint.style.boxSizing="border-box",this.hint.style.border=this.options.styles.hint.borderWidth+"px solid "+this.options.styles.hint.borderColor,this.hint.style.borderRadius=this.options.styles.hint.borderRadius+"px",this.hint.style.background=this.options.styles.hint.backgroundColor,this.hint.style.opacity="0",this.hint.appendChild(t),this.hint.appendChild(e),document.body.appendChild(this.hint)}var i=this.targetElem.getBoundingClientRect();this.hint.style.top=i.top+this.currentScroll+this.targetElem.offsetHeight+"px",this.hint.style.left=i.left+this.targetElem.offsetWidth+"px",document.getElementById("jsa-hint-title").innerHTML=this.currentStep.title,document.getElementById("jsa-hint-description").innerHTML=this.currentStep.description,1===this.currentStepIndex&&(this.hint.style.opacity="1")}},{key:"addStepTriggers",value:function(t){function e(s){s.stopPropagation();for(var r=s.target||s.srcElement,n=0;n<i.currentStep.triggerNext.length;n++){var o=i.currentStep.triggerNext[n];r.removeEventListener(o,e)}i.processStep(t)}var i=this;if(this.currentStep.triggerNext instanceof Array||(this.currentStep.triggerNext=[this.currentStep.triggerNext]),"prev"===t);else for(var s=0;s<this.currentStep.triggerNext.length;s++){var r=this.currentStep.triggerNext[s];this.targetElem.addEventListener(r,e)}}}]),t}(),StepsJsTools=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getScrollTop",value:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}}]),t}();