class StepsJs{constructor(t,e={}){this.currentScroll=StepsJsTools.getScrollTop(),this.steps=t,this.options=Object.assign({duration:300,styles:{frame:{customClass:"",borderWidth:3,borderColor:"#ff0000"},hint:{customClass:"",borderWidth:1,borderColor:"#00ff00",borderRadius:5,backgroundColor:"#dbffdb"}}},e),this.options.interval=5,this.frame=document.getElementById("jsa-frame"),this.hint=document.getElementById("jsa-hint");let i=this;window.onresize=function(t){i.isResizing=!0,setTimeout(function(){i.isResizing=!1},100),setTimeout(function(){i.isResizing||(i.moveFrame(),i.displayHint())},150)},window.onscroll=function(){i.currentScroll=StepsJsTools.getScrollTop()},this.run()}run(){this.currentStepIndex=0,this.processStep("next")}processStep(t="next"){if("prev"===t);else{if(this.currentStepIndex++,this.currentStepIndex>this.steps.length)return this.frame.style.opacity="0",void(this.hint.style.opacity="0");this.currentStep=this.steps[this.currentStepIndex-1]}this.targetElem=document.getElementById(this.currentStep.elementId),this.moveFrame(),this.displayHint(),this.addStepTriggers(t)}moveFrame(){this.frame||(this.frame=document.createElement("div"),this.frame.setAttribute("id","jsa-frame"),""!=this.options.styles.frame.customClass&&this.frame.setAttribute("class",this.options.styles.frame.customClass),this.frame.setAttribute("style","pointer-events:none;"),this.frame.style.position="absolute",this.frame.style.boxSizing="border-box",this.frame.style.border=this.options.styles.frame.borderWidth+"px solid "+this.options.styles.frame.borderColor,this.frame.style.opacity="0",document.body.appendChild(this.frame));let t=this.targetElem.getBoundingClientRect(),e=this.frame.getBoundingClientRect(),i=e.top+this.currentScroll,s=e.left,r=this.frame.offsetWidth,n=this.frame.offsetHeight,o=t.top+this.currentScroll-i,l=t.left-s,h=this.targetElem.offsetWidth-r,a=this.targetElem.offsetHeight-n,d=o/(this.options.duration/this.options.interval),p=l/(this.options.duration/this.options.interval),c=h/(this.options.duration/this.options.interval),u=a/(this.options.duration/this.options.interval);clearInterval(this.moveInterval),this.moveInterval=setInterval(function(t,e){return function(){++e>t.options.duration/t.options.interval?(clearInterval(t.moveInterval),1===t.currentStepIndex&&(t.frame.style.opacity="1")):(i+=d,s+=p,r+=c,n+=u,t.frame.style.top=i+"px",t.frame.style.left=s+"px",t.frame.style.width=r+"px",t.frame.style.height=n+"px")}}(this,0),this.options.interval)}displayHint(){if(!this.hint){let t=document.createElement("div");t.setAttribute("id","jsa-hint-title");let e=document.createElement("div");e.setAttribute("id","jsa-hint-description"),this.hint=document.createElement("div"),this.hint.setAttribute("id","jsa-hint"),""!=this.options.styles.hint.customClass&&this.hint.setAttribute("class",this.options.styles.hint.customClass),this.hint.style.position="absolute",this.hint.style.padding="10px",this.hint.style.boxSizing="border-box",this.hint.style.border=this.options.styles.hint.borderWidth+"px solid "+this.options.styles.hint.borderColor,this.hint.style.borderRadius=this.options.styles.hint.borderRadius+"px",this.hint.style.background=this.options.styles.hint.backgroundColor,this.hint.style.opacity="0",this.hint.appendChild(t),this.hint.appendChild(e),document.body.appendChild(this.hint)}let t=this.targetElem.getBoundingClientRect();this.hint.style.top=t.top+this.currentScroll+this.targetElem.offsetHeight+"px",this.hint.style.left=t.left+this.targetElem.offsetWidth+"px",document.getElementById("jsa-hint-title").innerHTML=this.currentStep.title,document.getElementById("jsa-hint-description").innerHTML=this.currentStep.description,1===this.currentStepIndex&&(this.hint.style.opacity="1")}addStepTriggers(t){function e(s){s.stopPropagation();let r=s.target||s.srcElement;for(let t=0;t<i.currentStep.triggerNext.length;t++){let s=i.currentStep.triggerNext[t];r.removeEventListener(s,e)}i.processStep(t)}let i=this;if(this.currentStep.triggerNext instanceof Array||(this.currentStep.triggerNext=[this.currentStep.triggerNext]),"prev"===t);else for(let t=0;t<this.currentStep.triggerNext.length;t++){let i=this.currentStep.triggerNext[t];this.targetElem.addEventListener(i,e)}}}class StepsJsTools{static getScrollTop(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}}