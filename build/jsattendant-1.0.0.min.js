class Assistant{constructor(t,e={}){this.steps=t,this.options=Object.assign({duration:200,interval:5,styles:{frame:{borderWidth:3,borderColor:"#ff0000"},hint:{borderWidth:1,borderColor:"#00ff00",borderRadius:5,backgroundColor:"#dbffdb"}}},e),this.frame=document.getElementById("jsa-frame"),this.hint=document.getElementById("jsa-hint"),this.run()}run(){this.currentStepIndex=0,this.processStep("next")}processStep(t="next",e){if("prev"===t);else{if(this.currentStepIndex++,this.currentStepIndex>this.steps.length)return this.frame.style.opacity="0",void(this.hint.style.opacity="0");this.currentStep=this.steps[this.currentStepIndex-1]}this.targetElem=document.getElementById(this.currentStep.elementId),this.moveFrame(),this.displayHint(),this.addStepTrigger(t)}moveFrame(){this.frame||(this.frame=document.createElement("div"),this.frame.setAttribute("id","jsa-frame"),this.frame.setAttribute("style","pointer-events:none;"),this.frame.style.position="absolute",this.frame.style.boxSizing="border-box",this.frame.style.border=this.options.styles.frame.borderWidth+"px solid "+this.options.styles.frame.borderColor,this.frame.style.opacity="0",document.body.appendChild(this.frame));let t=this.targetElem.getBoundingClientRect(),e=this.frame.getBoundingClientRect(),i=e.top,s=e.left,n=this.frame.offsetWidth,r=this.frame.offsetHeight,o=t.top-i,h=t.left-s,d=this.targetElem.offsetWidth-n,l=this.targetElem.offsetHeight-r,a=o/(this.options.duration/this.options.interval),p=h/(this.options.duration/this.options.interval),c=d/(this.options.duration/this.options.interval),m=l/(this.options.duration/this.options.interval),u=setInterval(function(t,e){return function(){++e>t.options.duration/t.options.interval?(clearInterval(u),1===t.currentStepIndex&&(t.frame.style.opacity="1")):(i+=a,s+=p,n+=c,r+=m,t.frame.style.top=i+"px",t.frame.style.left=s+"px",t.frame.style.width=n+"px",t.frame.style.height=r+"px")}}(this,0),this.options.interval)}displayHint(){if(!this.hint){let t=document.createElement("div");t.setAttribute("id","jsa-hint-title");let e=document.createElement("div");e.setAttribute("id","jsa-hint-description"),this.hint=document.createElement("div"),this.hint.setAttribute("id","jsa-hint"),this.hint.style.position="absolute",this.hint.style.padding="10px",this.hint.style.boxSizing="border-box",this.hint.style.border=this.options.styles.hint.borderWidth+"px solid "+this.options.styles.hint.borderColor,this.hint.style.borderRadius=this.options.styles.hint.borderRadius+"px",this.hint.style.background=this.options.styles.hint.backgroundColor,this.hint.style.opacity="0",this.hint.appendChild(t),this.hint.appendChild(e),document.body.appendChild(this.hint)}let t=this.targetElem.getBoundingClientRect();this.hint.style.top=t.top+this.targetElem.offsetHeight+"px",this.hint.style.left=t.left+this.targetElem.offsetWidth+"px",document.getElementById("jsa-hint-title").innerHTML=this.currentStep.title,document.getElementById("jsa-hint-description").innerHTML=this.currentStep.description,1===this.currentStepIndex&&(this.hint.style.opacity="1")}addStepTrigger(t){function e(){i.targetElem.removeEventListener("click",e),i.processStep(t)}let i=this;"prev"===t||"click"!==this.currentStep.triggerNext&&"change"!==this.currentStep.triggerNext||this.targetElem.addEventListener(this.currentStep.triggerNext,e)}}